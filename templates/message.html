{% extends "admin_base.html" %}

{% block title %}Messages - {{ super() }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='CSS/display.css') }}">
{% endblock %}

{% block admin_content %}
<div class="messages-container">
  <h2>Contact Messages</h2>
  <table style="color:black;">
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Message</th>
      <th>Date</th>
      <th>Actions</th>
    </tr>


    {% if messages %}
      {% for message in messages %}
      <tr>
        <td>{{ message[1] }}</td>
        <td>{{ message[2] }}</td>
        <td>{{ message[3] }}</td>
        <td>{{ message[4].strftime('%Y-%m-%d %H:%M:%S') if message[4] else 'N/A' }}</td>
        <td>
          <a href="{{ url_for('delete_message', message_id=message[0]) }}"
             onclick="return confirm('Are you sure you want to delete this message?')"
             class="delete-btn">Delete</a>
        </td>
      </tr>
      {% endfor %}
    {% else %}
      <tr>
        <td colspan="5">No messages found.</td>
      </tr>
    {% endif %}
  </table>
</div>
{% endblock %}